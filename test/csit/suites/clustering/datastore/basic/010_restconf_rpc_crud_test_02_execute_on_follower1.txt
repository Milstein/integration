*** Settings ***
Documentation     Test suite for RESTCONF RPC CAR PERSON 
Library           Collections
Library           ../../../../libraries/RequestsLibrary.py
Library           ../../../../libraries/Common.py
Library           ../../../../libraries/CrudLibrary.py
Library           ../../../../libraries/SettingsLibrary.py
Library           ../../../../libraries/UtilLibrary.py
Variables         ../../../../variables/Variables.py

*** Variables ***
${REST_CONTEXT}    /restconf/config/


*** Test Cases *** 
Add cars and get cars from Leader 
    [Documentation]    Add 100 cars and get added cars from Leader
	${resp}		AddCar	${FOLLOWER1}	${PORT}	${100}	
	${resp}		Getcars	${FOLLOWER1}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   manufacturer1	
           	
Add persons and get persons from Leader 
    [Documentation]    Add 100 persons and get persons
    [Documentation]    Note: There should be one person added first to enable rpc
	${resp}		AddPerson	${FOLLOWER1}	${PORT}	${0}	
	${resp}		AddPerson	${FOLLOWER1}	${PORT}	${100}	
	${resp}		GetPersons	${FOLLOWER1}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   user5	

Add car-person mapping and get car-person mapping from Leader 
    [Documentation]	Add car-person and get car-person from Leader 
    [Documentation]  Note: This is done to enable working of rpc 

	${resp}		AddCarPerson	${FOLLOWER1}	${PORT}	${0}	
	${resp}		GetCarPersonMappings	${FOLLOWER1}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   user0
	
Purchase 100 cars using Leader 
    [Documentation]  Purchase 100 cars using Leader

	${resp}		BuyCar	${FOLLOWER1}	${PORT}	${100}	
	${resp}		GetCarPersonMappings	${FOLLOWER1}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200

Get car-person mappings using Leader
   [Documentation] 	Get car-person mappings using Leader to see 100 entry
	${resp}		GetCarPersonMappings	${FOLLOWER1}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   user100

Get car-person mappings using Leader
   [Documentation] 	Get car-person mappings using Leader to see 100 entry
	${resp}		GetCarPersonMappings	${LEADER}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   user100
	Should Contain     ${resp.content}   user5


Get car-person mappings using Follower2
   [Documentation] 	Get car-person mappings using Follower2 to see 100 entry
	${resp}		GetCarPersonMappings	${FOLLOWER2}	${PORT}	${0}
	Should Be Equal As Strings    ${resp.status_code}    200
	Should Contain     ${resp.content}   user0
	Should Contain     ${resp.content}   user100
